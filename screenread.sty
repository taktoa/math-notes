\ProvidesPackage{screenread}
[2012/01/23 v. 1.0 Settings for screen-readable document]

% Copyright (C) 2012 John Collins, collins@phys.psu.edu
% License: LPPL 1.2

% Note:  To avoid compatibility issues between geometry and at least one
% class file, it may be better to set all the dimensions by hand.

%  24 Jan 2012  Argument to \SetScreen is screen width
%  23 Jan 2012  Remove package showlayout
%  22 Jan 2012  Initial version, based on ideas in 
%               B. Veytsman amd M. Ware, Tugboat 32 (2011) 261.

\RequirePackage{everyshi}
\RequirePackage{geometry}

%=======================

\pagestyle{empty}

\EveryShipout{%
    \pdfpageheight=\pagetotal
    \advance\pdfpageheight by 2in
    \advance\pdfpageheight by \topmargin
    \advance\pdfpageheight by \textheight % This and next allow for footnotes
    \advance\pdfpageheight by -\pagegoal
}

\AtEndDocument{\pagebreak}

\let\oldsection=\section
\def\section{\pagebreak\oldsection}


\newlength\screenwidth

\newcommand\SetScreen[1]{%
  % Argument #1 is the screen width.
  % Set appropriate layout parameters, with only a little white space
  %   around the text.
  \setlength\screenwidth{#1}%
  \setlength\textwidth{#1}%
  \addtolength\textwidth{-1cm}%
  \geometry{layoutwidth=\screenwidth,
            paperwidth=\screenwidth,
            textwidth=\textwidth,
            layoutheight=500cm,
            paperheight=500cm,
            textheight=500cm,
            top=0.5cm,
            hcentering=true
  }%
}

% Compute a reasonable default screen width, and set it
\setlength\screenwidth{\textwidth}
\addtolength\screenwidth{1cm}
\SetScreen{\screenwidth}

\endinput
